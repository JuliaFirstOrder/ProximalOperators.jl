<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="kul-forbes">
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Calculus rules - ProximalOperators.jl</title>

        <link href="../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../assets/Documenter.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">ProximalOperators.jl</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../functions/">Functions</a>
                </li>
            
            
            
                <li class="active">
                    <a href="./">Calculus rules</a>
                </li>
            
            
            
                <li >
                    <a href="../operators/">Prox and gradient</a>
                </li>
            
            
            
                <li >
                    <a href="../demos/">Demos</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../functions/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../operators/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/kul-forbes/ProximalOperators.jl">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#calculus-rules">Calculus rules</a></li>
        
            <li><a href="#duality">Duality</a></li>
        
            <li><a href="#distances-from-convex-sets">Distances from convex sets</a></li>
        
            <li><a href="#functions-combination">Functions combination</a></li>
        
            <li><a href="#functions-regularization">Functions regularization</a></li>
        
            <li><a href="#pre-and-post-transformations">Pre- and post-transformations</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<p><a id='Calculus-rules-1'></a></p>
<h1 id="calculus-rules">Calculus rules</h1>
<p>The calculus rules described in the following allow to modify and combine <a href="../functions/">functions</a>, to obtain new ones with efficiently computable proximal mapping.</p>
<p><a id='Duality-1'></a></p>
<h2 id="duality">Duality</h2>
<p><a id='ProximalOperators.Conjugate' href='#ProximalOperators.Conjugate'>#</a>
<strong><code>ProximalOperators.Conjugate</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Convex conjugate</strong></p>
<pre><code>Conjugate(f)
</code></pre>

<p>Returns the convex conjugate (also known as Fenchel conjugate, or Fenchel-Legendre transform) of function <code>f</code>, that is</p>
<p>
<script type="math/tex; mode=display">
f^*(x) = \sup_y \{ \langle y, x \rangle - f(y) \}.
</script>
</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/conjugate.jl#L5-L14' class='documenter-source'>source</a><br></p>
<p><a id='Distances-from-convex-sets-1'></a></p>
<h2 id="distances-from-convex-sets">Distances from convex sets</h2>
<p>When the indicator of a convex set is constructed (see <a href="../functions/#Indicators-of-sets-1">Indicators of sets</a>) the (squared) distance from the set can be constructed using the following:</p>
<p><a id='ProximalOperators.DistL2' href='#ProximalOperators.DistL2'>#</a>
<strong><code>ProximalOperators.DistL2</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Distance from a convex set</strong></p>
<pre><code>DistL2(ind_S)
</code></pre>

<p>Given <code>ind_S</code> the indicator function of a convex set $S$, and an optional positive parameter <code>λ</code>, returns the (weighted) Euclidean distance from $S$, that is function</p>
<p>
<script type="math/tex; mode=display">
g(x) = \mathrm{dist}_S(x) = \min \{ \|y - x\| : y \in S \}.
</script>
</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/distL2.jl#L5-L14' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.SqrDistL2' href='#ProximalOperators.SqrDistL2'>#</a>
<strong><code>ProximalOperators.SqrDistL2</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Squared distance from a convex set</strong></p>
<pre><code>SqrDistL2(ind_S, λ=1.0)
</code></pre>

<p>Given <code>ind_S</code> the indicator function of a convex set $S$, and an optional positive parameter <code>λ</code>, returns the (weighted) squared Euclidean distance from $S$, that is function</p>
<p>
<script type="math/tex; mode=display">
g(x) = \tfrac{λ}{2}\mathrm{dist}_S^2(x) = \min \left\{ \tfrac{λ}{2}\|y - x\|^2 : y \in S \right\}.
</script>
</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/sqrDistL2.jl#L5-L14' class='documenter-source'>source</a><br></p>
<p><a id='Functions-combination-1'></a></p>
<h2 id="functions-combination">Functions combination</h2>
<p>The following means of combination are important in that they allow to represent a very common situation: defining the sum of multiple functions, each applied to an independent block of variables. The following two constructors, <a href="./#ProximalOperators.SeparableSum"><code>SeparableSum</code></a> and <a href="./#ProximalOperators.SlicedSeparableSum"><code>SlicedSeparableSum</code></a>, allow to do this in two (complementary) ways.</p>
<p><a id='ProximalOperators.SeparableSum' href='#ProximalOperators.SeparableSum'>#</a>
<strong><code>ProximalOperators.SeparableSum</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Separable sum of functions</strong></p>
<pre><code>SeparableSum(f₁,…,fₖ)
</code></pre>

<p>Given functions <code>f₁</code> to <code>fₖ</code>, returns their separable sum, that is</p>
<p>
<script type="math/tex; mode=display">
g(x_1,…,x_k) = ∑_{i=1}^k f_i(x_i).
</script>
</p>
<p>The object <code>g</code> constructed in this way can be evaluated at <code>Tuple</code>s of length <code>k</code>. Likewise, the <code>prox</code> and <code>prox!</code> methods for <code>g</code> operate with (input and output) <code>Tuple</code>s of length <code>k</code>.</p>
<p>Example:</p>
<pre><code>f = SeparableSum(NormL1(), NuclearNorm()); # separable sum of two functions
x = randn(10); # some random vector
Y = randn(20, 30); # some random matrix
f_xY = f((x, Y)); # evaluates f at (x, Y)
(u, V), f_uV = prox(f, (x, Y), 1.3); # computes prox at (x, Y)
</code></pre>

<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/separableSum.jl#L5-L23' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.SlicedSeparableSum' href='#ProximalOperators.SlicedSeparableSum'>#</a>
<strong><code>ProximalOperators.SlicedSeparableSum</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Sliced separable sum of functions</strong></p>
<pre><code>SlicedSeparableSum((f₁,…,fₖ), (J₁,…,Jₖ))
</code></pre>

<p>Returns the function</p>
<p>
<script type="math/tex; mode=display">
g(x) = ∑_{i=1}^k f_i(x_{J_i}).
</script>
</p>
<pre><code>SlicedSeparableSum(f, (J₁,…,Jₖ))
</code></pre>

<p>Analogous to the previous one, but applies the same function <code>f</code> to all slices of the variable <code>x</code>:</p>
<p>
<script type="math/tex; mode=display">
g(x) = ∑_{i=1}^k f(x_{J_i}).
</script>
</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/slicedSeparableSum.jl#L5-L21' class='documenter-source'>source</a><br></p>
<p><a id='Functions-regularization-1'></a></p>
<h2 id="functions-regularization">Functions regularization</h2>
<p><a id='ProximalOperators.MoreauEnvelope' href='#ProximalOperators.MoreauEnvelope'>#</a>
<strong><code>ProximalOperators.MoreauEnvelope</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Moreau envelope</strong></p>
<pre><code>MoreauEnvelope(f, γ=1.0)
</code></pre>

<p>Returns the Moreau envelope (also known as Moreau-Yosida regularization) of function <code>f</code> with parameter <code>γ</code> (positive), that is</p>
<p>
<script type="math/tex; mode=display">
f^γ(x) = \min_z \left\{ f(z) + \tfrac{1}{2γ}\|z-x\|^2 \right\}.
</script>
</p>
<p>If $f$ is convex, then $f^γ$ is a smooth, convex, lower approximation to $f$, having the same minima as the original function.</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/moreauEnvelope.jl#L3-L13' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.Regularize' href='#ProximalOperators.Regularize'>#</a>
<strong><code>ProximalOperators.Regularize</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Regularize</strong></p>
<pre><code>Regularize(f, ρ=1.0, a=0.0)
</code></pre>

<p>Given function <code>f</code>, and optional parameters <code>ρ</code> (positive) and <code>a</code>, returns</p>
<p>
<script type="math/tex; mode=display">
g(x) = f(x) + \tfrac{ρ}{2}\|x-a\|².
</script>
</p>
<p>Parameter <code>a</code> can be either an array or a scalar, in which case it is subtracted component-wise from <code>x</code> in the above expression.</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/regularize.jl#L5-L15' class='documenter-source'>source</a><br></p>
<p><a id='Pre-and-post-transformations-1'></a></p>
<h2 id="pre-and-post-transformations">Pre- and post-transformations</h2>
<p><a id='ProximalOperators.Postcompose' href='#ProximalOperators.Postcompose'>#</a>
<strong><code>ProximalOperators.Postcompose</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Postcomposition with an affine transformation</strong></p>
<pre><code>Postcompose(f, a=1.0, b=0.0)
</code></pre>

<p>Returns the function</p>
<p>
<script type="math/tex; mode=display">
g(x) = a\cdot f(x) + b.
</script>
</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/postcompose.jl#L5-L14' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.Precompose' href='#ProximalOperators.Precompose'>#</a>
<strong><code>ProximalOperators.Precompose</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Precomposition with linear mapping/translation</strong></p>
<pre><code>Precompose(f, L, μ, b)
</code></pre>

<p>Returns the function</p>
<p>
<script type="math/tex; mode=display">
g(x) = f(Lx + b)
</script>
</p>
<p>where $f$ is a convex function and $L$ is a linear mapping: this must satisfy $LL^* = μI$ for $μ ⩾ 0$. Furthermore, either $f$ is separable or parameter <code>μ</code> is a scalar, for the <code>prox</code> of $g$ to be computable.</p>
<p>Parameter <code>L</code> defines $L$ through the <code>A_mul_B!</code> and <code>Ac_mul_B!</code> methods. Therefore <code>L</code> can be an <code>AbstractMatrix</code> for example, but not necessarily.</p>
<p>In this case, <code>prox</code> and <code>prox!</code> are computed according to Prop. 24.14 in Bauschke, Combettes "Convex Analisys and Monotone Operator Theory in Hilbert Spaces", 2nd edition, 2016. The same result is Prop. 23.32 in the 1st edition of the same book.</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/precompose.jl#L5-L19' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.PrecomposeDiagonal' href='#ProximalOperators.PrecomposeDiagonal'>#</a>
<strong><code>ProximalOperators.PrecomposeDiagonal</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Precomposition with diagonal scaling/translation</strong></p>
<pre><code>PrecomposeDiagonal(f, a, b)
</code></pre>

<p>Returns the function</p>
<p>
<script type="math/tex; mode=display">
g(x) = f(\mathrm{diag}(a)x + b)
</script>
</p>
<p>where $f$ is a convex function. Furthermore, $f$ must be separable, or <code>a</code> must be a scalar, for the <code>prox</code> of $g$ to be computable. Parametes <code>a</code> and <code>b</code> can be arrays of multiple dimensions, according to the shape/size of the input <code>x</code> that will be provided to the function: the way the above expression for $g$ should be thought of, is <code>g(x) = f(a.*x + b)</code>.</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/precomposeDiagonal.jl#L5-L15' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.Tilt' href='#ProximalOperators.Tilt'>#</a>
<strong><code>ProximalOperators.Tilt</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Linear tilting</strong></p>
<pre><code>Tilt(f, a, b=0.0)
</code></pre>

<p>Given function <code>f</code>, an array <code>a</code> and a constant <code>b</code> (optional), returns function</p>
<p>
<script type="math/tex; mode=display">
g(x) = f(x) + \langle a, x \rangle + b.
</script>
</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/tilt.jl#L5-L14' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.Translate' href='#ProximalOperators.Translate'>#</a>
<strong><code>ProximalOperators.Translate</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>Translation</strong></p>
<pre><code>Translate(f, b)
</code></pre>

<p>Returns the translated function</p>
<p>
<script type="math/tex; mode=display">
g(x) = f(x + b)
</script>
</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/calculus/translate.jl#L3-L12' class='documenter-source'>source</a><br></p></div>
        </div>

	<footer class="col-md-12">
		<hr>
		
		<p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
	</footer>


        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
        <script src="../assets/mathjaxhelper.js"></script>
    </body>
</html>