<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="kul-forbes">
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Prox and gradient - ProximalOperators.jl</title>

        <link href="../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../assets/Documenter.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">ProximalOperators.jl</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../functions/">Functions</a>
                </li>
            
            
            
                <li >
                    <a href="../calculus/">Calculus rules</a>
                </li>
            
            
            
                <li class="active">
                    <a href="./">Prox and gradient</a>
                </li>
            
            
            
                <li >
                    <a href="../demos/">Demos</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../calculus/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../demos/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/kul-forbes/ProximalOperators.jl">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#prox-and-gradient">Prox and gradient</a></li>
        
            <li><a href="#complex-and-matrix-variables">Complex and matrix variables</a></li>
        
            <li><a href="#multiple-variable-blocks">Multiple variable blocks</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<p><a id='Prox-and-gradient-1'></a></p>
<h1 id="prox-and-gradient">Prox and gradient</h1>
<p>The following methods allow to evaluate the proximal mapping (and gradient, when defined) of mathematical functions, which are constructed according to what described in <a href="../functions/#Functions-1">Functions</a> and <a href="../calculus/#Calculus-rules-1">Calculus rules</a>.</p>
<p><a id='ProximalOperators.prox' href='#ProximalOperators.prox'>#</a>
<strong><code>ProximalOperators.prox</code></strong> &mdash; <em>Function</em>.</p>
<p><strong>Proximal mapping</strong></p>
<pre><code>prox(f, x, γ=1.0)
</code></pre>

<p>Computes</p>
<p>
<script type="math/tex; mode=display">
y = \mathrm{prox}_{\gamma f}(x) = \arg\min_z \left\{ f(z) + \tfrac{1}{2\gamma}\|z-x\|^2 \right\}.
</script>
</p>
<p>The resulting point $y$ is returned as first output, and $f(y)$ as second output.</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/ProximalOperators.jl#L107-L117' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.prox!' href='#ProximalOperators.prox!'>#</a>
<strong><code>ProximalOperators.prox!</code></strong> &mdash; <em>Function</em>.</p>
<p><strong>Proximal mapping (in-place)</strong></p>
<pre><code>prox!(y, f, x, γ=1.0)
</code></pre>

<p>Computes</p>
<p>
<script type="math/tex; mode=display">
y = \mathrm{prox}_{\gamma f}(x) = \arg\min_z \left\{ f(z) + \tfrac{1}{2\gamma}\|z-x\|^2 \right\}.
</script>
</p>
<p>The resulting point $y$ is written to the (pre-allocated) array <code>y</code>, which must have the same shape/size as <code>x</code>, and the value the proximal point of $x$ with respect to function $f(y)$ is returned.</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/ProximalOperators.jl#L125-L135' class='documenter-source'>source</a><br></p>
<p><a id='Base.LinAlg.gradient' href='#Base.LinAlg.gradient'>#</a>
<strong><code>Base.LinAlg.gradient</code></strong> &mdash; <em>Function</em>.</p>
<p><strong>Gradient mapping</strong></p>
<pre><code>gradient(f, x)
</code></pre>

<p>For a differentiable function $f$, returns $\nabla f(x)$ as first output, and $f(x)$ as second output.</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/ProximalOperators.jl#L139-L145' class='documenter-source'>source</a><br></p>
<p><a id='ProximalOperators.gradient!' href='#ProximalOperators.gradient!'>#</a>
<strong><code>ProximalOperators.gradient!</code></strong> &mdash; <em>Function</em>.</p>
<p><strong>Gradient mapping (in-place)</strong></p>
<pre><code>gradient!(y, f, x)
</code></pre>

<p>For a differentiable function $f$, writes $\nabla f(x)$ to <code>y</code>, which must be pre-allocated and have the same shape/size as <code>x</code>, and returns $f(x)$ as output.</p>
<p><a target='_blank' href='https://github.com/kul-forbes/ProximalOperators.jl/tree/baebd06ce600508294645f1d44b27979fae48367/src/ProximalOperators.jl#L153-L159' class='documenter-source'>source</a><br></p>
<p><a id='Complex-and-matrix-variables-1'></a></p>
<h2 id="complex-and-matrix-variables">Complex and matrix variables</h2>
<p>The proximal mapping is usually discussed in the case of functions over <script type="math/tex">\mathbb{R}^n</script>. However, by adapting the inner product <script type="math/tex">\langle\cdot,\cdot\rangle</script> and associated norm <script type="math/tex">\|\cdot\|</script> adopted in its definition, one can extend the concept to functions over more general spaces. When functions of unidimensional arrays (vectors) are concerned, the standard Euclidean product and norm are used in defining <a href="./#ProximalOperators.prox"><code>prox</code></a> (therefore <a href="./#ProximalOperators.prox!"><code>prox!</code></a>, but also <a href="./#Base.LinAlg.gradient"><code>gradient</code></a> and <a href="./#ProximalOperators.gradient!"><code>gradient!</code></a>). This are the inner product and norm which are computed by <code>dot</code> and <code>norm</code> in Julia.</p>
<p>When bidimensional, tridimensional (matrices and tensors) and higher dimensional arrays are concerned, then the definitions of proximal mapping and gradient are naturally extended by considering the appropriate inner product. For <script type="math/tex">k</script>-dimensional arrays, of size <script type="math/tex">n_1 \times n_2 \times \ldots \times n_k</script>, we consider the inner product</p>
<p>
<script type="math/tex; mode=display">
\langle A, B \rangle = \sum_{i_1,\ldots,i_k} A_{i_1,\ldots,i_k} \cdot B_{i_1,\ldots,i_k}
</script>
</p>
<p>which reduces to the usual Euclidean product in case of unidimensional arrays, and to the <em>trace product</em> <script type="math/tex">\langle A, B \rangle = \mathrm{tr}(A^\top B)</script> in the case of matrices (bidimensional arrays). This inner product, and the associated norm, are the ones computed by <code>vecdot</code> and <code>vecnorm</code> in Julia.</p>
<p><a id='Multiple-variable-blocks-1'></a></p>
<h2 id="multiple-variable-blocks">Multiple variable blocks</h2>
<p>By combining functions together through <a href="../calculus/#ProximalOperators.SeparableSum"><code>SeparableSum</code></a>, the resulting function will have multiple inputs, <em>i.e.</em>, it will be defined over the <em>Cartesian product</em> of the domains of the individual functions. To represent elements (points) of such product space, here we use Julia's <code>Tuple</code> objects.</p>
<p><strong>Example.</strong> Suppose that the following function needs to be represented:</p>
<p>
<script type="math/tex; mode=display">
f(x, Y) = \|x\|_1 + \|Y\|_*,
</script>
</p>
<p>that is, the sum of the <script type="math/tex">L_1</script> norm of some vector <script type="math/tex">x</script> and the nuclear norm (the sum of the singular values) of some matrix <script type="math/tex">Y</script>. This is accomplished as follows. Function <code>f</code> will be defined over <em>pairs</em> of appropriate <code>Array</code> objects. Likewise, the <a href="./#ProximalOperators.prox"><code>prox</code></a> method will take pairs of <code>Array</code>s as inputs, and return pairs of <code>Array</code>s as output:</p>
<pre><code class="example">using ProximalOperators
f = SeparableSum(NormL1(), NuclearNorm());
x = randn(10); # some random vector
Y = randn(20, 30); # some random matrix
f_xY = f((x, Y)); # evaluates f at (x, Y)
(u, V), f_uV = prox(f, (x, Y), 1.3); # computes prox at (x, Y)
</code></pre>

<p>The same holds for the separable sum of more than two functions, in which case "pairs" are to be replaced with <code>Tuple</code>s of the appropriate length.</p></div>
        </div>

	<footer class="col-md-12">
		<hr>
		
		<p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
	</footer>


        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
        <script src="../assets/mathjaxhelper.js"></script>
    </body>
</html>